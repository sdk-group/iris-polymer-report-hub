<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-menu/paper-menu.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../iris-polymer-button-group/iris-button-group.html">

<dom-module id="report-group-maker">
  <template>
    <style>
      :host {
        @apply(--layout-vertical);
      }

      .group-variants {
        padding: 10px;
        @apply(--layout-horizontal);
        @apply(--layout-center);
      }

      .header {
        width: 150px;
      }
    </style>

    <template is="dom-repeat" items="[[variants]]" as="group">
      <div class="group-variants">
        <span class="header">
          [[group.header]]
        </span>
        <iris-button-group selected="{{group.selected}}" buttons="[[group.content]]" on-tap="selectGroup"></iris-button-group>
      </div>
    </template>


  </template>
  <script>
    Polymer({
      is: 'report-group-maker',
      properties: {
        groups: {
          type: Array,
          notify: true,
          value: []
        }
      },
      selectGroup() {
        let result = _.reduce(this.variants, (a, g) => (g.selected !== 'no') ? a.push(g.selected) && a : a, []);
        this.set('groups', result);
      },
      ready() {
        this.variants = [{
            header: "Год",
            selected: 'no',
            content: [{
              label: 'Нет',
              code: 'no'
            }, {
              label: 'Месяцы',
              code: {
                method: 'month',
                field: 'dedicated_date'
              }
            }]
          }, {
            header: "Месяц",
            selected: 'no',
            content: [{
              label: 'Нет',
              code: 'no'
            }, {
              label: "Дни",
              code: {
                method: 'month-day',
                field: 'dedicated_date'
              }
            }, {
              label: "Дни недели",
              code: {
                method: 'week-day',
                field: 'dedicated_date'
              }
            }]
          },
          // {
          //   header: "День",
          //   selected: 'no',
          //   content: [{
          //     label: 'Нет',
          //     code: 'no'
          //   }, {
          //     label: "10 минут",
          //     code: {
          //       method: '10minute',
          //       field: 'booking_date'
          //     }
          //   }, {
          //     label: "30 минут",
          //     code: {
          //       method: '30minute',
          //       field: 'booking_date'
          //     }
          //   }, {
          //     label: "1 час",
          //     code: {
          //       method: '60minute',
          //       field: 'booking_date'
          //     }
          //   }]
          // }, 
          {
            header: "Дополнительно",
            selected: 'no',
            content: [{
              label: 'Нет',
              code: 'no'
            }, {
              label: "офис",
              code: {
                method: 'enum',
                field: 'org_destination'
              }
            }]
          }
        ];

      }
    });
  </script>
</dom-module>
